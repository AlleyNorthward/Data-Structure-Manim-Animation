[TOC]

# 文案

## 头文件

本节我们涉及到的内容是线性表的顺序存储与实现。

开始之前，咱们先来看一下导入头文件以及函数状态定义语句块。教材中代码示例几乎都是C语言实现，但由于使用了C++中的引用(&),只有.cpp文件可以编译通过。而C++采用向后兼容C语言，所以我们也可以直接像C语言引入头文件的方式在C++文件中引入。

部分默认的符号常量与自定义类型定义如下。Status是状态类型自定义的名称, 其实就是函数返回值,通常是int类型.

这些内容比较固定, 经常出现, 知道就可以。

## 顺序存储结构定义
首先，来看看看顺序表是如何定义的。这里指的是最大容量，初始化为100，并且自定义元素类型为ElemType类型。*base代表存储空间首地址，相当于数组名。然后则是容量和表长，分别代表存储空间容量与线性表中有效元素个数。

## 顺序表的初始化

接下来，我们来看看顺序表的初始化。起一个好的函数名很重要，对后续递归学习很有帮助。这里的Sq是Sequential，按顺序的意思，目的是区分顺序存储和链式存储。初始化过程可以分为三个部分，扩容、异常判断、更新。整体并不是很难，我们往下看。

## 顺序表的销毁与清空

顺序表的销毁与清空比较简单，我这里也不再多说什么。

## 顺序表的插入

关于顺序表的插入，整体上是按照是否合法、是否需要扩容、插入、更新的思想来解决的。为了方便描述，只关注问题本身，我这里先假设数据合法，并且容量足够，这样只需要关注如何插入的就行了。不过书中给的代码示例，插入位置i是从1开始算的，而由于顺序表的起始下标是从0开始的，直接分析i与下标关系的话，不太好理清，所以为了简化问题，我假设插入位置i也是从0开始算的，这样，我们只需要分析线性表的下标与插入位置i的关系就好。
下面我们以6为待插入数据为例，展示插入动画过程。
左侧变量含义分别是插入位置i，循环变量j，线性表最大下标L.size - 1, 插入位置position(其实就是i, 便于理解), 初始默认值也如左图所示。
假如我们想在线性表尾部追加, 此时position为5，循环条件j = L.size - 1 = 4，小于 position, 所以不会进入循环，直接赋值。
如果我们想在4、5之间插值，只需要将5右移，插入6即可。
接下来再展示插入2、3之间的动画。
所以for循环中条件是怎么来的呢？
注意到，线性表最大下标一直是L.size - 1, 而变化的是插入位置i，如果L.size - 1 - i = 0, 需要右移一位， 等于1则右移两位，等等等等等。所以我们只需要循环右移的位数即可，也就是从表尾循环到第i处，然后将数据插入position即可。
插入之后，表长不要忘了更新。
之后，我们看看是否合法。对于插入位置i而言，我默认的插入下标从0开始，所以非法下标是i<0与i>=L.size - 1(也就是i>L.size).由于插入了数据，所以存在超出最大容量的情况，那么我们需要添加上扩容判断。扩容这里用了realloc，大家可以课后查询。本书扩容默认是两倍的L.capacity.
此时可能有的老铁就要问了，巷北巷北，这跟书上写的也不一样啊，书上插入下标i从1开始的啊。没错，确实不一样，不过解决起来也EEZZ，只需要添加这一行代码就可以了。或者写个版本二也是可以的。这里其实有一丝丝的递归思想，希望大家能够明白。

## 顺序表的删除

明白了顺序表的插入后, 顺序表的删除就容易很多了。插入是从后往前循环, 逐个右移, 找到position后放入。 而删除则是从前往后循环, 找到position后, 逐个左移, 覆盖position中的元素。

删除不用realloc, 但仍需判断是否合法。我还是假设插入位置i是从0开始的，那么判断是否合法还是这样。

由于函数返回值为OK或ERROR，用于判断是否删除成功，所以无法直接返回删除值，不过通过传入引用，给e赋值，可以起到类似返回值的效果。
接下来，我们动态地展示一下删除过程。
需要注意的是，所谓的删除并不是真正地删除，只是L.size-- 表示表长减1，但表尾依然有值。大家也可以尝试输出一下已开辟空间却未赋值的结点，看看结果是什么。

## 顺序表的查找定位

查找定位其实也比较简单，整体思想是遍历顺序表，当找到第一个与待查找值e相等的元素时break，并返回下标。

## 顺序表的遍历输出
课本中给的参考代码，包含两个函数，每步都会判断是否输出成功。另外，这里使用visit，是函数指针，只需要这么调用该函数，就能遍历输出。

## 拓展
关于C++的STL，大家在学习C++的面向对象的时候会涉及到，当然Java里面也有相关的容器，比较类似。这些没必要去记，平时练习时有意识的将数组换为容器写，忘了就去看看用法，写多了也就熟悉了。

## 结束语
关于线性表的顺序存储就这么多，大家可以结合课本一起看。



